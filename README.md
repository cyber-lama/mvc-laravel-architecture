# mvc-laravel-architecture

## Database

Изначально желательно нарисовать схему работы бд, например с помощью https://app.diagrams.net/

1. Database
   1. Migrations
   2. Factories
   3. Seeders
   4. Models

Migrations - система контроля версий для нашей базы данных. Они позволяют изменять структуру БД, в то же время оставаясь в курсе изменений других участников.
```php
php artisan make:migration create_flights_table
```

Factories - при тестировании нам может потребоваться вставить несколько записей в вашу базу данных перед выполнением теста. Вместо того, чтобы вручную указывать значение каждого столбца при создании этих тестовых данных, Laravel позволяет вам определять набор атрибутов по умолчанию для каждой из ваших моделей Eloquent, используя фабрики моделей.
```php
php artisan make:factory PostFactory
```

Seeders - Laravel имеет простой метод заполнения базы данных тестовыми данными, используя классы-наполнители(seed classes). Эти классы хранятся в database/seeds. Можно использовать любое имя для названия класса-наполнителя, но разумным будет применять имена, подобные UsersTableSeeder.

Models - При использовании Eloquent (ORM) каждая таблица БД имеет соответствующую «Модель», которая используется для взаимодействия с этой таблицей. Помимо получения записей из таблицы БД, модели Eloquent также позволяют вставлять, обновлять и удалять записи из таблицы. В модели мы можем описывать дополнительную логику, которая связана с работой модели и базы данных.
```php
php artisan make:model Flight --migration // модель с миграцией
```

## Tests

Работа над приложением, после разметки бд, желательно, должна начинаться с написания тестов.

Feature - Функциональные тесты могут тестировать большую часть вашего кода, включая взаимодействие нескольких объектов друг с другом, или даже целый HTTP-запрос, возвращающий JSON. Как правило, большинство ваших тестов должны быть функциональными. Эти типы тестов обеспечивают максимальную уверенность в том, что ваша система в целом работает должным образом.
```php
php artisan make:test UserTest
```

Unit - Модульные (юнит) тесты – это тесты, которые фокусируются на очень небольшой изолированной части вашего кода. Фактически, большинство модульных тестов, вероятно, сосредоточены на одном методе. Тесты в каталоге «Unit» тестов не загружают ваше приложение Laravel и, следовательно, не могут получить доступ к базе данных вашего приложения или другим службам фреймворка.

```php
php artisan make:test UserTest --unit
```





